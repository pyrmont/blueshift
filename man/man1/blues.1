.\"
.\" Generated by predoc at 2025-12-14T23:29:49Z
.\"
.Dd December 15, 2025
.Dt BLUES 1
.Os Blueshift DEVEL
.
.Sh NAME
.Nm blues
.Nd archive Bluesky posts to GitHub
.
.Sh SYNOPSIS
.Nm
.Oo
.Fl c
.Ar file No \&|
.Fl "-config"
.Ar file
.Oc
.Oo
.Fl i
.Ar string No \&|
.Fl "-ignore"
.Ar string
.Oc
…
.Oo
.Fl l
.Ar limit No \&|
.Fl "-limit"
.Ar limit
.Oc
.Oo
.Fl q No \&|
.Fl "-quiet"
.Oc
.
.Sh DESCRIPTION
.Nm
is a command-line utility for archiving Bluesky posts to a GitHub
repository as Markdown files.
It fetches posts from Bluesky,
converts them to Markdown format with YAML frontmatter,
and uploads them to a specified GitHub repository.
.Pp
The tool filters out reposts,
replies,
quote posts,
and posts that begin with
.Ql "@" .
Posts can also be filtered using the
.Fl "-ignore"
option.
.
.Ss Options
.Bl -tag -width Ds
.It Xo
.Fl c
.Ar file No \&|
.Fl "-config"
.Ar file
.Xc
A path to the configuration file.
This defaults to
.Ql "config\&.jdn"
in the current working directory.
For more information about the configuration file,
see CONFIGURATION below.
.It Xo
.Fl i
.Ar string No \&|
.Fl "-ignore"
.Ar string
.Xc
Filter out posts that contain the specified string.
This option can be specified multiple times to filter multiple
strings.
.It Xo
.Fl l
.Ar limit No \&|
.Fl "-limit"
.Ar limit
.Xc
Limit the number of posts to fetch from Bluesky.
.It Xo
.Fl q No \&|
.Fl "-quiet"
.Xc
Silence output.
By default,
.Nm
displays progress information about authentication,
fetching,
filtering,
and uploading.
.El
.
.Sh CONFIGURATION
.Nm
requires a configuration file in JDN (Janet Data Notation)
format.
The configuration file must contain the following keys:
.Bl -bullet -offset 3n
.It
.Ic :bluesky :
A struct containing Bluesky credentials
.Pp
.Bl -bullet -offset 3n -compact
.It
.Ic :handle :
Your Bluesky handle
.It
.Ic :password :
Your Bluesky app password (not your main password)
.El
.It
.Ic :github :
A struct containing GitHub repository information
.Pp
.Bl -bullet -offset 3n -compact
.It
.Ic :owner :
Your GitHub username
.It
.Ic :token :
A GitHub Personal Access Token with repository write access
.It
.Ic :repo :
The name of the repository to upload posts to
.It
.Ic :posts-dir :
The directory in the repository where posts should be saved
.El
.El
.Pp
Example configuration file:
.Bd -literal -offset indent
{:bluesky {:handle \(dquser\&.bsky\&.social\(dq
           :password \(dqyour-app-password\(dq}
 :github {:owner \(dqusername\(dq
          :token \(dqghp_yourtoken\(dq
          :repo \(dqblog\(dq
          :posts-dir \(dqsrc/_posts\(dq}}
.Ed
.Pp
To obtain a Bluesky app password:
.Pp
.Bl -enum -offset 3n -compact
.It
log in to Bluesky
.It
go to Settings > Privacy and Security > App Passwords
.It
create a new app password
.It
copy the generated password to your configuration file
.El
.Pp
To obtain a GitHub Personal Access Token:
.Pp
.Bl -enum -offset 3n -compact
.It
log in to GitHub
.It
go to Settings > Developer settings > Personal access tokens
> Tokens (classic)
.It
click “Generate new token (classic)”
.It
select the
.Ql "repo"
scope
.It
generate the token and copy it to your configuration file
.El
.Pp
The configuration file may also contain an optional
.Ic :last-fetch
key,
which is automatically updated by
.Nm
to track the timestamp of the most recent post that was uploaded.
This prevents duplicate uploads on subsequent runs.
.
.Sh EXIT STATUS
.Nm
exits
.Ql "0"
if exiting without error.
Otherwise the exit status will be
.Ql "1" .
.
.Sh FILES\c
.Em config.jdn
Default configuration file location in the current working directory.
.
.Sh EXAMPLES
Archive all new posts using the default configuration file:
.Bd -literal -offset indent
$ blues
.Ed
.Pp
Archive posts using a custom configuration file:
.Bd -literal -offset indent
$ blues --config ~/\&.blues/config\&.jdn
.Ed
.Pp
Archive posts but filter out any containing “draft” or “WIP”:
.Bd -literal -offset indent
$ blues --ignore draft --ignore WIP
.Ed
.Pp
Archive only the 10 most recent posts:
.Bd -literal -offset indent
$ blues --limit 10
.Ed
.Pp
Archive posts silently without progress output:
.Bd -literal -offset indent
$ blues --quiet
.Ed
.
.Sh AUTHORS
.An Michael Camilleri Aq Mt mike@inqk.net
.
.Sh BUGS
Report issues at
.Lk https://github.com/pyrmont/blueshift .
